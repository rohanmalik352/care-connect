<%- include('../partials/head') %>
<div class="auth-page">
  <div class="auth-box">
    <div class="auth-top">
      <div class="text-center mb-2">
        <i class="fas fa-heartbeat fa-2x mb-2" style="color:var(--green)"></i>
        <h4 class="fw-800 mb-0" style="letter-spacing:-0.5px">Create Account</h4>
        <p class="text-muted small mt-1">Join CareConnect â€” it's free</p>
      </div>
      <div class="auth-tabs mt-3" id="roleTabs">
        <button class="auth-tab-btn active-doctor" onclick="setRole('doctor',this)" id="tabDoctor"><i class="fas fa-user-md me-2"></i>Doctor</button>
        <button class="auth-tab-btn" onclick="setRole('patient',this)" id="tabPatient"><i class="fas fa-user me-2"></i>Patient</button>
      </div>
    </div>
    <div class="auth-body">
      <%- include('../partials/flash') %>
      <form action="/auth/register" method="POST" id="regForm">
        <input type="hidden" name="role" id="roleField" value="doctor" />
        <div class="mb-3">
          <label class="form-label fw-600 small">Full Name</label>
          <input type="text" name="name" class="form-control auth-input" placeholder="Dr. Rohan Malik" required />
        </div>
        <div class="mb-3">
          <label class="form-label fw-600 small">Email Address</label>
          <input type="email" name="email" class="form-control auth-input" placeholder="doctor@hospital.com" required />
        </div>
        <div class="mb-4">
          <label class="form-label fw-600 small">Password <span class="text-muted">(min 6 chars)</span></label>
          <input type="password" name="password" class="form-control auth-input" placeholder="Create a strong password" minlength="6" required />
        </div>
        <button type="submit" class="btn btn-purple w-100 btn-lg" id="regBtn">
          <i class="fas fa-user-plus me-2"></i>Register as Doctor
        </button>
      </form>
      <p class="text-center text-muted mt-3 small">
        Already have an account? <a href="/auth/login" style="color:var(--purple);font-weight:700">Login here</a>
      </p>
    </div>
  </div>
</div>
<script>
function setRole(role, btn) {
  document.querySelectorAll('.auth-tab-btn').forEach(b => b.className = 'auth-tab-btn');
  document.getElementById('roleField').value = role;
  const regBtn = document.getElementById('regBtn');
  if(role === 'doctor') {
    btn.className = 'auth-tab-btn active-doctor';
    regBtn.className = 'btn btn-purple w-100 btn-lg';
    regBtn.innerHTML = '<i class="fas fa-user-plus me-2"></i>Register as Doctor';
    document.querySelector('[name="name"]').placeholder = 'Dr. Rohan Malik';
    document.querySelector('[name="email"]').placeholder = 'doctor@hospital.com';
  } else {
    btn.className = 'auth-tab-btn active-patient';
    regBtn.className = 'btn btn-green w-100 btn-lg';
    regBtn.innerHTML = '<i class="fas fa-user-plus me-2"></i>Register as Patient';
    document.querySelector('[name="name"]').placeholder = 'Your Full Name';
    document.querySelector('[name="email"]').placeholder = 'patient@email.com';
  }
}
</script>
<%- include('../partials/footer') %>
